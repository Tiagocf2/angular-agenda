"use strict";(self.webpackChunkangular_agenda=self.webpackChunkangular_agenda||[]).push([[884],{6884:(N,f,r)=>{r.r(f),r.d(f,{SignupModule:()=>q});var S=r(4755),o=r(9401),u=r(9114),l=r(6012),g=r(8097),m=r(1728),A=r(1292),h=r(430),d=r(1662),v=r(5698),p=r(262),c=r(515),T=r(5764);let Z=(()=>{class a{static cep(t){const n=t.value;return n&&/^\d{8}$/.test(n)?null:{invalidCep:!0}}static equalsTo(t){return n=>{if(!n.root||!n.root.controls)return null;if(!t)throw new Error(this.EQUALS_TO_ERROR);const i=n.root.get(t);if(!i)throw new Error(this.EQUALS_TO_ERROR);return i.value===n.value?null:{notEqualsTo:t}}}}return a.EQUALS_TO_ERROR="The field name provided is invalid",a})();var C=r(1486),e=r(2223),U=r(5030),b=r(9406),E=r(1088);const I=[{path:"",component:(()=>{class a{get cepValid(){return!this.formulario.get("cep").hasError("invalidCep")}constructor(t,n,i,y,O){this.formBuilder=t,this.router=n,this.authService=i,this.messagesService=y,this.cepService=O,this.loading=!1,this.fetchingCep=!1}ngOnInit(){this.formulario=this.formBuilder.group({firstname:[null,[o.kI.required,o.kI.minLength(3)]],lastname:[null,[o.kI.required,o.kI.minLength(2)]],email:[null,[o.kI.required,o.kI.email]],address:[null],cep:[null,[Z.cep]],username:[null,[o.kI.required,o.kI.minLength(6)]],password:[null,[o.kI.required,o.kI.minLength(6)]],repeat_password:[null,[o.kI.required,Z.equalsTo("password")]]})}handleSubmit(){if(!this.formulario.valid)return;this.loading=!0;const t=this.formulario.value,n={name:t.firstname+" "+t.lastname,username:t.username,password:t.password,address:t.address,email:t.email};this.authService.signup(n).pipe((0,v.q)(1),(0,p.K)(i=>(console.error(i),this.loading=!1,this.messagesService.showMessage({text:(0,C.LT)(i)}),c.E))).subscribe(this.postSignupAuthentication.bind(this,n))}postSignupAuthentication(t){this.authService.signin({username:t.username,password:t.password},!1).pipe((0,v.q)(1),(0,p.K)(n=>(console.error(n),this.loading=!1,this.router.navigate(["/"]),c.E))).subscribe(()=>{this.router.navigate(["/home"])})}searchCep(){const t=this.formulario.get("cep"),n=this.formulario.value.cep;t.disable(),this.fetchingCep=!0,this.cepService.search(n).pipe((0,p.K)(i=>(console.error(i),this.messagesService.showMessage({text:"CEP inv\xe1lido",type:T.C.ERROR}),this.fetchingCep=!1,t.enable(),c.E))).subscribe(i=>{this.formulario.get("address")?.setValue((0,C.Z)(i)),this.fetchingCep=!1,t.enable()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(o.qu),e.Y36(d.F0),e.Y36(U.e),e.Y36(b.K),e.Y36(E.q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-signup"]],decls:48,vars:3,consts:[[1,"auth-card-title"],[1,"auth-form",3,"formGroup","ngSubmit"],[1,"auth-form-group"],["matInput","","formControlName","firstname"],["matInput","","formControlName","lastname"],["matInput","","formControlName","email"],["hideRequiredMarker","true"],["matInput","","formControlName","address"],["hideRequiredMarker","true",1,"cep-field"],["matInput","","formControlName","cep","maxlength","8"],["mat-icon-button","","matPrefix","","aria-label","Procurar Cep","type","button",3,"disabled","click"],["matInput","","formControlName","username"],["matInput","","formControlName","password","type","password"],["matInput","","formControlName","repeat_password","type","password"],["mat-raised-button","","color","primary",3,"disabled"],["mat-flat-button","","routerLink","/auth/login"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-header")(1,"mat-card-title",0),e._uU(2,"Cadastro"),e.qZA(),e.TgZ(3,"mat-card-subtitle"),e._uU(4,"Preencha os campos abaixo para continuar"),e.qZA()(),e.TgZ(5,"mat-card-content")(6,"form",1),e.NdJ("ngSubmit",function(){return n.handleSubmit()}),e.TgZ(7,"div",2)(8,"mat-form-field")(9,"mat-label"),e._uU(10,"Nome"),e.qZA(),e._UZ(11,"input",3),e.qZA(),e.TgZ(12,"mat-form-field")(13,"mat-label"),e._uU(14,"Sobrenome"),e.qZA(),e._UZ(15,"input",4),e.qZA()(),e.TgZ(16,"mat-form-field")(17,"mat-label"),e._uU(18,"E-mail"),e.qZA(),e._UZ(19,"input",5),e.qZA(),e.TgZ(20,"div",2)(21,"mat-form-field",6)(22,"mat-label"),e._uU(23,"Endere\xe7o"),e.qZA(),e._UZ(24,"input",7),e.qZA(),e.TgZ(25,"mat-form-field",8)(26,"mat-label"),e._uU(27,"CEP"),e.qZA(),e._UZ(28,"input",9),e.qZA(),e.TgZ(29,"button",10),e.NdJ("click",function(){return n.searchCep()}),e.TgZ(30,"mat-icon"),e._uU(31,"search"),e.qZA()()(),e.TgZ(32,"mat-form-field")(33,"mat-label"),e._uU(34,"Nome de usu\xe1rio"),e.qZA(),e._UZ(35,"input",11),e.qZA(),e.TgZ(36,"mat-form-field")(37,"mat-label"),e._uU(38,"Senha"),e.qZA(),e._UZ(39,"input",12),e.qZA(),e.TgZ(40,"mat-form-field")(41,"mat-label"),e._uU(42,"Repetir a senha"),e.qZA(),e._UZ(43,"input",13),e.qZA(),e.TgZ(44,"button",14),e._uU(45," Finalizar "),e.qZA(),e.TgZ(46,"a",15),e._uU(47,"J\xe1 tenho uma conta"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",n.formulario),e.xp6(23),e.Q6J("disabled",n.fetchingCep||!n.cepValid),e.xp6(15),e.Q6J("disabled",n.loading))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.nD,o.sg,o.u,d.rH,l.dn,l.dk,l.$j,l.n5,u.KE,u.hX,u.qo,g.Nt,m.zs,m.lW,m.RK,h.Hw],styles:["mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem}.cep-field[_ngcontent-%COMP%]{width:10ch}",".auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.auth-card-title[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1.5em;text-align:center;margin-bottom:.5rem}.auth-form-group[_ngcontent-%COMP%]{display:flex;gap:.75rem}.auth-form-group[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.mat-mdc-card-header[_ngcontent-%COMP%]{justify-content:center}"]}),a})()}];let M=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.Bz.forChild(I),d.Bz]}),a})();var R=r(3377);let q=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[{provide:u.o2,useValue:{appearance:"outline"}}],imports:[S.ez,o.UX,M,R.W,l.QW,u.lN,g.c,m.ot,A.p9,h.Ps]}),a})()}}]);