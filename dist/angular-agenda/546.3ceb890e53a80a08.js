"use strict";(self.webpackChunkangular_agenda=self.webpackChunkangular_agenda||[]).push([[546],{2546:(B,d,n)=>{n.r(d),n.d(d,{ProfilePageModule:()=>F});var P=n(4755),r=n(9401),m=n(9114),l=n(6012),c=n(8097),f=n(1728),v=n(1292),g=n(430),u=n(1662),h=n(5698),C=n(262),y=n(515),Z=n(5764),M=n(1486),e=n(2223),S=n(8505),U=n(4004),A=n(7379),T=n(8955),p=n(5926);let b=(()=>{class a{constructor(t,o){this.api=t,this.store=o}update(t,o){return this.api.put(`/users/${t}`,o,{auth:!0}).pipe((0,h.q)(1),(0,S.b)(i=>{this.store.dispatch(A.Z.update(i))}),(0,U.U)(()=>{}))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(T.s),e.LFG(p.yh))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var x=n(9406);const O=[{path:"",component:(()=>{class a{constructor(t,o,i,I,J){this.formBuilder=t,this.router=o,this.userService=i,this.messagesService=I,this.store=J,this.loading=!1,this.fetchingCep=!1}ngOnInit(){this.formulario=this.formBuilder.group({username:[null,[r.kI.minLength(6)]],name:[null,[r.kI.minLength(3)]],email:[null,[r.kI.email]],address:[null]}),this.storeSubscription=this.store.select(t=>t.user).subscribe(t=>{console.log(t),null!=t.id&&(this.user={id:t.id,email:t.email,name:t.name,username:t.username,address:t.address},this.formulario.reset(this.user))})}ngOnDestroy(){this.storeSubscription.unsubscribe()}goBack(){window.history.back()}handleSubmit(){if(!this.formulario.valid)return;this.loading=!0;const t=this.formulario.value,o={};t.name&&t.name!==this.user.name&&(o.name=t.name),t.username&&t.username!==this.user.username&&(o.username=t.username),t.address&&t.address!==this.user.address&&(o.address=t.address),t.email&&t.email!==this.user.email&&(o.email=t.email),this.userService.update(this.user.id,o).pipe((0,h.q)(1),(0,C.K)(i=>(console.error(i),this.loading=!1,this.messagesService.showMessage({text:(0,M.LT)(i)}),y.E))).subscribe(()=>{this.loading=!1,this.messagesService.showMessage({text:"Dados alterados com sucesso!",type:Z.C.SUCCESS})})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(r.qu),e.Y36(u.F0),e.Y36(b),e.Y36(x.K),e.Y36(p.yh))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-profile-page"]],decls:32,vars:2,consts:[[1,"auth-layout"],[1,"content-card"],[1,"auth-card-title"],[1,"auth-form",3,"formGroup","ngSubmit"],["matInput","","formControlName","username"],[1,"auth-form-group"],["matInput","","formControlName","name"],["matInput","","formControlName","email"],["hideRequiredMarker","true"],["matInput","","formControlName","address"],["mat-raised-button","","color","primary",3,"disabled"],["mat-raised-button","","color","secondary","type","button",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"main",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-icon"),e._uU(4,"back"),e.qZA(),e.TgZ(5,"mat-card-title",2),e._uU(6,"Perfil"),e.qZA(),e.TgZ(7,"mat-card-subtitle"),e._uU(8,"Modifique suas informa\xe7\xf5es pessoais"),e.qZA()(),e.TgZ(9,"mat-card-content")(10,"form",3),e.NdJ("ngSubmit",function(){return o.handleSubmit()}),e.TgZ(11,"mat-form-field")(12,"mat-label"),e._uU(13,"Nome de usu\xe1rio"),e.qZA(),e._UZ(14,"input",4),e.qZA(),e.TgZ(15,"div",5)(16,"mat-form-field")(17,"mat-label"),e._uU(18,"Nome"),e.qZA(),e._UZ(19,"input",6),e.qZA()(),e.TgZ(20,"mat-form-field")(21,"mat-label"),e._uU(22,"E-mail"),e.qZA(),e._UZ(23,"input",7),e.qZA(),e.TgZ(24,"mat-form-field",8)(25,"mat-label"),e._uU(26,"Endere\xe7o"),e.qZA(),e._UZ(27,"input",9),e.qZA(),e.TgZ(28,"button",10),e._uU(29," Salvar "),e.qZA(),e.TgZ(30,"button",11),e.NdJ("click",function(){return o.goBack()}),e._uU(31," Voltar "),e.qZA()()()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",o.formulario),e.xp6(18),e.Q6J("disabled",o.loading))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,l.a8,l.dn,l.dk,l.$j,l.n5,m.KE,m.hX,c.Nt,f.lW,g.Hw],styles:["mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem}.cep-field[_ngcontent-%COMP%]{width:10ch}.auth-layout[_ngcontent-%COMP%]{background-color:#0a0a15;display:flex;justify-content:center;align-items:center;height:-moz-fit-content;height:fit-content;min-height:calc(100% - 50px);padding-top:50px}.content-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1.125rem 3rem;width:-moz-fit-content;width:fit-content;margin-top:-15vh}@media screen and (max-width: 500px){.content-card[_ngcontent-%COMP%]{width:100%;height:100%;margin-top:0}}",".auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.auth-card-title[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1.5em;text-align:center;margin-bottom:.5rem}.auth-form-group[_ngcontent-%COMP%]{display:flex;gap:.75rem}.auth-form-group[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.mat-mdc-card-header[_ngcontent-%COMP%]{justify-content:center}"]}),a})()}];let N=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.Bz.forChild(O),u.Bz]}),a})();var E=n(3377);let F=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[{provide:m.o2,useValue:{appearance:"fill"}}],imports:[P.ez,r.UX,N,E.W,l.QW,m.lN,c.c,f.ot,v.p9,g.Ps]}),a})()}}]);